Arcanum project by lovable AI and Bolt AI
สามารถเข้าไปลองได้ที่ link : https://eikq-magic-mutter-77-1gt0.bolt.host
# Arcanum — คู่มือฉบับ “เริ่มจากศูนย์” (Step-by-Step) + วิธีเล่น

> **สั้นๆ ก่อน:** Arcanum คือ **เว็บแอป/เว็บเกมต้นแบบ** ที่โค้ดถูกวางแบบมาตรฐาน (Vite + TypeScript + Tailwind) พร้อม **แบ็กเอนด์ `server.cjs`** สำหรับงานที่ต้องซ่อนคีย์ลับ/เรียก AI/เชื่อมฐานข้อมูล (Supabase)  
> เป้าหมายเอกสารนี้: ให้คนที่ **ไม่เคยเขียนโค้ดมาก่อน** ก็สามารถเปิดโปรเจกต์, รัน, เข้าใจโครงสร้าง และ **เล่น/ทดสอบ** ได้ รวมถึงรู้ว่า “ถ้าจะปรับ **AI** หรือ **ระบบเกม** ต้องไปแก้ตรงไหน”

---

## 0) โปรเจกต์นี้คืออะไร? (What is this app?)
- โปรเจกต์นี้เป็น **เว็บแอปอินเตอร์แอคทีฟ** ที่สามารถต่อ **ระบบ AI/ฐานข้อมูล** ผ่านฝั่งเซิร์ฟเวอร์ (`server.cjs`) ได้
- โครงสร้างถูกสแกฟโฟลด์ด้วยเครื่องมือสมัยใหม่ (Vite + TS + Tailwind) ทำให้ **แก้ UI ง่าย**, **รีโหลดไว**, และ **แยกฝั่งเว็บ/ฝั่งเซิร์ฟเวอร์ชัดเจน**
- ในหลายเวอร์ชันของโปรเจกต์ “Arcanum” จะพัฒนาเป็น **เดโมเกมแนวร่ายเวท** (ตัวอย่าง: ผู้เล่นกดเริ่ม → อนุญาตไมโครโฟน → พูดคำสั่ง/คาถา → เกมตอบสนองด้วยภาพ/เสียง/คะแนน)  
  > *ถ้าโปรเจกต์ในสาขาปัจจุบันยังไม่เปิดใช้ไมค์หรือระบบเกม ให้ถือส่วนนี้เป็น “แนวทางการเล่น” ที่คุณสามารถเปิดใช้/ต่อยอดได้ทันที (ดูหัวข้อ 6 และ 7)*

---

## 1) เตรียมเครื่องครั้งแรก (Beginner Friendly)
### ทางลัดแบบง่ายสุด (ไม่ใช้ Git ก็ได้)
1. เข้า GitHub > ปุ่ม **Code** > **Download ZIP**  
2. แตกไฟล์ ZIP ไว้ที่โฟลเดอร์ใดก็ได้ในเครื่อง
3. เปิดโฟลเดอร์นั้นด้วย **VS Code**

### วิธีมาตรฐาน (แนะนำ)
1. ติดตั้ง:
   - **Node.js (LTS)** — สำหรับรันเครื่องมือเว็บสมัยใหม่  
   - **VS Code** — โปรแกรมเปิด/แก้โค้ด  
   - **Git** — โปรแกรมดาวน์โหลดโค้ดจาก GitHub
2. เปิด **VS Code** → กด **Ctrl+Shift+P** → พิมพ์ `Git: Clone` → วางลิงก์ repo → เลือกโฟลเดอร์ปลายทาง
3. เปิดโฟลเดอร์โปรเจกต์ใน VS Code

> ไม่ว่าคุณจะใช้ ZIP หรือ Git สุดท้ายเราต้อง “เปิดโฟลเดอร์ของโปรเจกต์” ใน VS Code ให้ได้ก่อน

---

## 2) รันโปรเจกต์ (แค่ 3 คำสั่ง)
เปิด **Terminal** (VS Code: `Terminal > New Terminal`) แล้วพิมพ์ทีละบรรทัด:
```bash
npm install     # ติดตั้งไลบรารี (ครั้งแรกเท่านั้น)
npm run dev     # รันฝั่งเว็บ (โหมดนักพัฒนา, มี hot reload)
```
> Terminal จะขึ้นลิงก์ประมาณ `http://localhost:5173` — เปิดในเบราว์เซอร์เพื่อดูหน้าเว็บ

ถ้าโปรเจกต์ของคุณ **ใช้ API ฝั่งเซิร์ฟเวอร์** ด้วย ให้เปิด Terminal อีกอันแล้วสั่ง:
```bash
node server.cjs # รันแบ็กเอนด์ (API/AI)
```
> เสร็จแล้ว หน้าเว็บจะเรียก API ได้ผ่านเส้นทาง `/api/...` ที่คุณกำหนดไว้ใน `server.cjs`

> **หมายเหตุ:** ถ้าในโปรเจกต์มีไฟล์ `bun.lockb` ด้วย แปลว่า *อาจ* ใช้ **Bun** แทน `npm` ได้ (สำหรับมือใหม่ ใช้ `npm` ไปก่อนง่ายกว่า)

---

## 3) วิธี “เล่น/ทดสอบ” แบบเร็ว (How to play/test)
> ส่วนนี้ออกแบบให้ **มือใหม่เปิดปุ๊บเล่นได้ปั๊บ** สำหรับตัวอย่างเกมแนวร่ายเวทด้วยเสียง — ถ้าสาขาปัจจุบันยังไม่เปิดระบบไมค์ ให้เลื่อนดูหัวข้อ 6–7 เพื่อเปิดใช้

1. เปิดเว็บที่รันอยู่ (`http://localhost:5173`)
2. คลิกปุ่ม **Start / Play / Begin** (แล้วแต่ UI ที่โปรเจกต์มี)
3. **อนุญาตไมโครโฟน** เมื่อเบราว์เซอร์ถาม (สำคัญมาก)
4. พูดคำสั่ง/คาถาที่ระบบรองรับ (ตัวอย่างทั่วไปเช่น ชื่อสกิล “Ignis / Aqua / Terra / Lux” หรือชื่อท่าที่กำหนดไว้ในโค้ด)  
   - ระบบจะทำงานตาม **ข้อความเสียงที่รู้จำสำเร็จ** → เปลี่ยนสถานะเกม, เล่นเอฟเฟกต์ภาพ/เสียง, หรือนับคะแนน
5. ลอง **พูดผิด/พูดเร็ว/พูดช้า** → สังเกตผลลัพธ์ (เป็นการทดสอบความแม่นเสียงและ UX)

> **เคล็ดลับ:** รายการคาถาที่รองรับมักถูกนิยามเป็น “ลิสต์คำ/พจนานุกรม” ในโค้ดฝั่งเว็บ (ค้นคำว่า `spells`, `commands`, `voice`, `speech` ในโฟลเดอร์ `src/`)

---

## 4) แอปนี้ทำงานยังไง (Flow ง่ายๆ)
```
ผู้เล่น → เบราว์เซอร์ (UI) 
          ↓
    ระบบรู้จำเสียง (เช่น Web Speech API ฝั่งเว็บ หรือเรียกเซิร์ฟเวอร์ให้ช่วยถอดเสียง)
          ↓
  ตัวแยกความหมาย/จับคู่คำสั่ง (เช่น เทียบกับลิสต์คาถา)
          ↓
      อัปเดตสถานะเกม (พลังชีวิต, คูลดาวน์, คะแนน, เอฟเฟกต์)
          ↓
     แสดงผล UI + เล่นเสียง/อนิเมชัน
          ↓
   (ถ้ามีฐานข้อมูล) บันทึกประวัติ/สถิติผ่าน Supabase
```
- **ฝั่งเว็บ (`src/`)** จัดการ UI, ลอจิกเกมฝั่งลูกข่าย, เรียก API เมื่อจำเป็น  
- **ฝั่งเซิร์ฟเวอร์ (`server.cjs`)** ทำงานที่ต้องซ่อนคีย์ เช่น **API Key ของ AI**, เรียก **โมเดล AI/บริการถอดเสียง**, คุยกับ **ฐานข้อมูล**
- **ฐานข้อมูล (`supabase/`)** เก็บสคีมา/สคริปต์ที่เกี่ยวข้อง

---

## 5) โครงสร้างไฟล์ที่ต้องรู้ (ดูเป็นชั้นๆ)
> ชื่อไฟล์/โฟลเดอร์อาจต่างกันบ้างตามสาขา แต่แนวคิดจะใกล้เคียงเสมอ

```
public/             # รูป/ไฟล์สาธารณะ
scripts/            # สคริปต์อัตโนมัติ (seed/deploy/etc.)
src/                # โค้ดฝั่งเว็บ: เพจ, คอมโพเนนต์, ลอจิกเกม
supabase/           # สคีมาฐานข้อมูล/นโยบาย (ถ้าใช้)
tests/              # ชุดทดสอบ (ถ้ามี)

server.cjs          # ฝั่งเซิร์ฟเวอร์: กำหนด API, เรียก AI, ต่อฐานข้อมูล
index.html          # หน้าโฮสต์ของ Vite (ฝัง <div id="root">)
vite.config.ts      # คอนฟิก Vite
tailwind.config.ts  # คอนฟิก Tailwind CSS
package.json        # สคริปต์และรายชื่อไลบรารี
```
**ใน `src/` (มักจะมีแนวทางนี้):**
```
src/
 ├─ main.(ts|tsx)        # จุดเริ่ม mount แอป
 ├─ App.(ts|tsx)         # โครงเราท์/เลย์เอาต์หลัก
 ├─ pages/               # เพจแต่ละหน้า (เช่น Home, Play, Settings)
 ├─ components/          # คอมโพเนนต์ย่อย (ปุ่ม, การ์ด, แถบพลัง)
 ├─ lib/ or services/    # ฟังก์ชันเรียก API/SDK (เช่น supabase.ts, api.ts)
 ├─ game/                # ลอจิกเกม (ถ้าแยกโฟลเดอร์ไว้)
 └─ styles/              # สไตล์เพิ่มเติม
```

---

## 6) จะ “เปิด/ปรับ” ระบบ AI ต้องไปตรงไหน
1. เปิด `server.cjs` แล้วค้นคำว่า `app.get(`, `app.post(`, หรือ `/api/` → จะเห็น **API endpoints** ทั้งหมด
2. ในฟังก์ชันของ endpoint มักจะพบการเรียก **โมเดล AI** หรือ **บริการถอดเสียง** พร้อมพารามิเตอร์เช่น
   - `model`, `temperature`, `max_tokens`, `system prompt` ฯลฯ
3. แก้/เพิ่มความสามารถได้โดย:
   - เปลี่ยนพารามิเตอร์ (เช่น **ลด/เพิ่มความสุ่ม** ด้วย `temperature`)
   - สร้าง route ใหม่ เช่น `POST /api/spellcast` เพื่อรองรับคำสั่ง/คาถาแบบกำหนดเอง
   - ถ้าจะเก็บสถิติ/สกอร์ → เพิ่มโค้ดบันทึกลง Supabase
4. ตั้งค่า **ตัวแปรแวดล้อม** ในไฟล์ `.env` (ดูตัวอย่างหัวข้อ 8) แล้วอ่านค่าใน `server.cjs` ด้วย `process.env.XYZ`

> **สำคัญ:** อย่าใส่ **API Key** ลงฝั่งเว็บ (ไฟล์ใน `src/`) — ให้เรียกผ่าน `server.cjs` เสมอ

---

## 7) จะ “ปรับระบบเกม/เสียง/ไมค์” ตรงไหนดี
- **คำสั่ง/คาถา:** ค้นคำว่า `spells`, `commands`, `voice`, `speech` ในโฟลเดอร์ `src/`  
  - เพิ่ม/ลบคำที่รองรับ, ตั้งคูลดาวน์, เพิ่มพลัง/ธาตุ ฯลฯ
- **ไมโครโฟน/รู้จำเสียง:** ดูส่วนที่เรียก Web Speech API หรือโค้ดที่เรียก `/api/transcribe` (ถ้ามี)
- **เอฟเฟกต์ภาพ/เสียง:** มักอยู่ใน `src/components/` หรือ `src/game/` (เช่น ตัวแสดงอนิเมชัน/เสียงประกอบ)
- **เพจ/เราท์:** อยู่ที่ `src/App.(ts|tsx)` หรือไฟล์ router หากแยกไว้

---

## 8) ตั้งค่า .env (ตัวอย่างที่พบบ่อย)
สร้างไฟล์ `.env` ที่รูทโปรเจกต์ (ระดับเดียวกับ `package.json`) แล้วใส่ค่าตามที่คุณใช้จริง:
```ini
# ฝั่งเว็บ (Vite ต้องขึ้นต้นด้วย VITE_)
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...

# ฝั่งเซิร์ฟเวอร์
OPENAI_API_KEY=...        # ถ้าเรียกโมเดลของ OpenAI
GEMINI_API_KEY=...        # ถ้าใช้ Google AI Studio
SUPABASE_SERVICE_ROLE=... # ถ้าต้องเขียนฐานข้อมูล
PORT=5174                 # พอร์ตสำหรับ server.cjs (ปรับได้)
```
> ดูว่าโปรเจกต์ของคุณ **ต้องใช้ตัวไหนจริงๆ บ้าง** โดยค้นคำว่า `process.env` ใน `server.cjs`

---

## 9) คำสั่งสำคัญ (สรุปรวดเดียว)
```bash
npm install        # ติดตั้งไลบรารี (ครั้งแรก)
npm run dev        # รันเว็บ (localhost:5173)
node server.cjs    # รัน API/AI (เปิดอีกเทอร์มินัลหนึ่ง)
npm run build      # สร้างไฟล์พร้อมโปรดักชัน
npm run preview    # พรีวิวไฟล์ที่บิลด์แล้ว
```

---

## 10) Controls & Tips (สำหรับโหมดร่ายเวทด้วยเสียง)
- **Start / Allow Mic:** เริ่มเล่นแล้ว “ยอมให้เว็บใช้ไมค์” ทุกครั้ง
- **พูดให้ชัด:** เริ่มด้วยคำคีย์เวิร์ด/คาถาที่รองรับ (เช่นชื่อสกิลสั้นๆ) แล้วตามด้วยเป้าหมายถ้ามี
- **สภาพแวดล้อม:** ลดเสียงรบกวน, ใช้ไมค์ที่ชัด
- **ลองผิด‑ลองถูก:** พูดเร็ว/ช้า/ย้ำคำ เพื่อรู้ขีดจำกัดระบบรู้จำเสียง
- **ถ้าไม่ติด:** รีเฟรชหน้า, ตรวจสิทธิ์ไมค์ในเบราว์เซอร์, ดูคอนโซล (F12 → Console) มี error ไหม

---

## 11) โครงงานนี้ใช้เทคโนโลยีอะไร
- **Frontend:** Vite + TypeScript + Tailwind (แก้ UI/เพจใน `src/`)
- **Backend:** Node (CommonJS) ผ่าน `server.cjs` (ซ่อนคีย์ลับ/เรียก AI/ต่อฐานข้อมูล)
- **Database (ถ้าใช้):** Supabase (`supabase/` มีไฟล์ที่เกี่ยวข้อง)

> โครงสร้างไฟล์และสัดส่วนภาษาใน repo นี้แสดงว่าเน้น TypeScript เป็นหลัก และมีไฟล์สำคัญอย่าง `src/`, `server.cjs`, `index.html`, `vite.config.ts`, `tailwind.config.ts` ให้แก้ไขได้ตรงจุด

---

## 12) แก้ปัญหายอดฮิต (Troubleshooting)
- **หน้าเว็บขาว/ไม่รัน:** ปิดแล้ว `npm run dev` ใหม่, ดู Terminal มี error ไหม
- **เรียก /api ไม่ได้:** ยังไม่ได้ `node server.cjs` หรือพอร์ตชน/URL ไม่ตรง
- **AI 401/403:** คีย์ใน `.env` ไม่ถูก/หมดอายุ หรือใส่ผิดฝั่ง
- **ไมค์ไม่ติด:** เช็กสิทธิ์ไมค์ในเบราว์เซอร์ (ไอคอนรูปกุญแจ/รูปไมค์ข้าง URL)
- **CORS error:** ต้องตั้งค่า `server.cjs` ให้อนุญาตโดเมนของเว็บ (origin) ที่คุณใช้งานอยู่

---

## 13) ฉบับย่อสรุปอีกครั้ง
- **แก้หน้าตา/เพจ** → `src/`
- **เพิ่ม AI/สร้าง API** → `server.cjs`
- **ฐานข้อมูล** → `supabase/` (+ `.env`)
- **เริ่มรัน** → `npm install` → `npm run dev` (+ `node server.cjs` ถ้าใช้ API)
- **เล่น** → เปิดเว็บ, อนุญาตไมค์, พูดคำสั่ง/คาถา, สังเกตผลลัพธ์

> พร้อมลุยแล้ว! ถ้าต้องการ ฉันสามารถปรับ README นี้ให้ตรงกับชื่อไฟล์/ฟังก์ชันจริงๆ ใน repo ของคุณ (เช่น รายการคาถาจริง, ชื่อ endpoint จริง) ได้ทันที
